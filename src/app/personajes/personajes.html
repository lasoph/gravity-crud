  <h2 class="title-pag">Gravity falls personajes</h2>
<section class="section-FaL">

  <!--Formulario-->
  <form [formGroup]="personajesForm" id="form" class="form-container" (ngSubmit)="guardarPersonaje()">
    @if (personajesForm.get("nombre")?.hasError("required")) {
    <span class="error">El nombre es obligatorio</span>
    }
    <input
      class="input-name"
      formControlName="nombre"
      type="text"
      placeholder="Nombre"
      [(ngModel)]="personaje.nombre"
      name="nombre"
      required
    />
    <br>
     @if (personajesForm.get("altura")?.hasError("required")) {
    <span class="error">La altura es obligatoria</span>}
    <input
      class="input-altura"
      formControlName="altura"
      type="text"
      placeholder="Altura"
      [(ngModel)]="personaje.altura"
      name="altura"
      required
    />
    <br>

     @if (personajesForm.get("edad")?.hasError("required")) {
    <span class="error">La edad es obligatoria</span>
    }

    <input
      class="input-edad"
      formControlName="edad"
      type="text"
      placeholder="Edad"
      [(ngModel)]="personaje.edad"
      name="edad"
      required
    />
    <br>

@if (personajesForm.get("cabello")?.hasError("required")) {
    <span class="error">El color de cabello es obligatorio</span>
    }

    <input
      class="input-cabello"
      formControlName="cabello"
      type="text"
      placeholder="Color de cabello"
      [(ngModel)]="personaje.cabello"
      name="cabello"
      required
    />
    <br>

 @if (personajesForm.get("sexo")?.hasError("required")) {
    <span class="error">Es obligatorio seleccionar el genero del personaje</span>
    }
    <label for="sexo">genero: </label>
    <select
      class="input-sexo"
      formControlName="sexo"
      name="sexo"
      id="sexo"
      [(ngModel)]="personaje.sexo"
      required
    >
      <option value="femenino">femenino</option>
      <option value="masculino">masculino</option>
      <option value="otro">Otro</option>
    </select>
    <br />

    <input
      class="input-habilidades"
      formControlName="habilidades"
      type="text"
      placeholder="Habilidades"
      [(ngModel)]="personaje.habilidades"
      name="habilidades"
    />

    <button class="btn_form" type="submit" [disabled]="personajesForm.invalid">
      {{ actualizado ? 'Editar' : 'Guardar' }}
    </button>
  </form>
  <br />

  <!--tabla (lista de personajes)-->
  <table border="1" class="table-list">
    <tr>
      <th>Nombre</th>
      <th>Edad</th>
      <th>Altura</th>
      <th>Color de cabello</th>
      <th>Genero</th>
      <th>Habilidades</th>
      <th>Acciones</th>
    </tr>

    <tr *ngFor="let p of personajes">
      <td>{{ p.nombre }}</td>
      <td>{{ p.edad }}</td>
      <td>{{ p.altura }}</td>
      <td>{{ p.cabello }}</td>
      <td>{{ p.sexo }}</td>
      <td>{{ p.habilidades }}</td>
      <td>
        <button (click)="abrirModalActualizar(p)">Editar</button>
        <button (click)="abrirModalEliminar(p)">Eliminar</button>
      </td>
    </tr>
  </table>


  <!--MODALES :D (AYUA)-->
  <!-- Button trigger modal -->

<!-- Modal -->
<!-- Modal Eliminar -->
<div *ngIf="modalEliminar" class="modal-fondo d-flex justify-content-center align-items-center">
  <div class="modal-dialog">
    <div class="modal-content">

      <div class="modal-header">
        <h1 class="modal-title fs-5">Eliminar personaje</h1>
        <button type="button" class="btn-close" (click)="cerrarModalEliminar()"></button>
      </div>

      <div class="modal-body">
        <p>¿Está seguro que desea eliminar a {{ personajeSeleccionado?.nombre }}?</p>
      </div>

      <div class="modal-footer">
        <button type="button" class="btn-modal-c" (click)="cerrarModalEliminar()">Cancelar</button>
        <button type="button" class="btn-modal" (click)="eliminarPersonaje(personajeSeleccionado._id)">Eliminar</button>
      </div>

    </div>
  </div>
</div>

<!--modal actualizar-->
<div *ngIf="modalEditar" class="modal-fondo d-flex justify-content-center align-items-center">
  <div class="modal-dialog">
    <div class="modal-content">

      <div class="modal-header">
        <h1 class="modal-title fs-5">Editar personaje</h1>
        <button type="button" class="btn-close" (click)="cerrarModalActualizar()"></button>
      </div>

      <div class="modal-body">
        <p>¿Está seguro que desea editar a {{ personajeSeleccionado?.nombre }}?</p>
      </div>

      <div class="modal-footer">
        <button type="button" class="btn-modal-c" (click)="cerrarModalActualizar()">Cancelar</button>
        <button type="button" class="btn-modal" (click)="actualizarPersonaje(personajeSeleccionado)"><a href="#form">Editar</a></button>
      </div>

    </div>
  </div>
</div>

</section>
